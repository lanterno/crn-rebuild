---
/**
 * SponsorGrid Component
 * Displays sponsor logos organized by tier.
 */
import type { Sponsor } from '@/lib/summits-data';

interface Props {
  sponsors: Sponsor[];
  showTiers?: boolean;
}

const { sponsors, showTiers = true } = Astro.props;

// Group sponsors by tier
const tiers = {
  organizing: sponsors.filter(s => s.tier === 'organizing'),
  platinum: sponsors.filter(s => s.tier === 'platinum'),
  gold: sponsors.filter(s => s.tier === 'gold'),
  silver: sponsors.filter(s => s.tier === 'silver'),
  partner: sponsors.filter(s => s.tier === 'partner'),
};

const tierLabels = {
  organizing: 'Organizing Partners',
  platinum: 'Platinum Sponsors',
  gold: 'Gold Sponsors',
  silver: 'Silver Sponsors',
  partner: 'Community Partners',
};

const tierSizes = {
  organizing: 'h-16 md:h-20',
  platinum: 'h-20 md:h-24',
  gold: 'h-14 md:h-18',
  silver: 'h-12 md:h-14',
  partner: 'h-10 md:h-12',
};

const tierGridCols = {
  organizing: 'grid-cols-2 md:grid-cols-3 lg:grid-cols-5',
  platinum: 'grid-cols-1 md:grid-cols-2',
  gold: 'grid-cols-2 md:grid-cols-3',
  silver: 'grid-cols-2 md:grid-cols-4',
  partner: 'grid-cols-3 md:grid-cols-4 lg:grid-cols-6',
};
---

<div class="space-y-12">
  {Object.entries(tiers).map(([tier, tierSponsors]) => 
    tierSponsors.length > 0 && (
      <div>
        {showTiers && (
          <h3 class="text-center text-lg font-heading font-semibold text-gray-700 mb-6 uppercase tracking-wide">
            {tierLabels[tier as keyof typeof tierLabels]}
          </h3>
        )}
        
        <div class={`grid ${tierGridCols[tier as keyof typeof tierGridCols]} gap-6 md:gap-8 items-center justify-items-center`}>
          {tierSponsors.map(sponsor => (
            <a
              href={sponsor.websiteUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="group flex items-center justify-center p-4 bg-white rounded-lg hover:shadow-lg transition-all duration-300"
              title={sponsor.name}
            >
              {sponsor.logoUrl ? (
                <img
                  src={sponsor.logoUrl}
                  alt={sponsor.name}
                  class={`${tierSizes[tier as keyof typeof tierSizes]} w-auto object-contain grayscale group-hover:grayscale-0 transition-all duration-300`}
                  loading="lazy"
                />
              ) : (
                <div class={`${tierSizes[tier as keyof typeof tierSizes]} flex items-center justify-center px-4`}>
                  <span class="text-gray-600 font-heading font-semibold text-center group-hover:text-crn-blue transition-colors">
                    {sponsor.name}
                  </span>
                </div>
              )}
            </a>
          ))}
        </div>
      </div>
    )
  )}
</div>

{/* No sponsors fallback */}
{sponsors.length === 0 && (
  <div class="text-center py-12">
    <p class="text-gray-500">Sponsors will be announced soon.</p>
  </div>
)}

